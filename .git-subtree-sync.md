# Syncing userdocs to Public GitHub Repo

This guide explains how to sync the `analyzer/userdocs/` folder to a separate public GitHub repository for GitHub Pages hosting.

## Setup (One-Time)

### 1. Create the Public Repository

1. Go to https://github.com/timothyfraser
2. Create a new repository named `cat`
3. Make it public
4. Don't initialize with README (we'll push the docs)

### 2. Add the Public Repo as a Remote

From the dashboard repo root:

```bash
cd /path/to/dashboard
git remote add public-docs https://github.com/timothyfraser/cat.git
```

### 3. Initial Push Using Subtree

Push the userdocs folder to the public repo:

```bash
git subtree push --prefix analyzer/userdocs public-docs main
```

If the public repo uses a different branch name (e.g., `gh-pages` for GitHub Pages):

```bash
git subtree push --prefix analyzer/userdocs public-docs gh-pages
```

## Regular Workflow

### After Making Changes to Documentation

1. **Commit changes in the main repo** (as usual):
   ```bash
   git add analyzer/userdocs/
   git commit -m "Update user documentation"
   git push origin <your-branch>
   ```

2. **Push to public repo**:
   ```bash
   git subtree push --prefix analyzer/userdocs public-docs main
   ```

   Or if using gh-pages:
   ```bash
   git subtree push --prefix analyzer/userdocs public-docs gh-pages
   ```

### Alternative: Using Split (Faster for Large Repos)

If the main repo is large, you can use `subtree split` for faster pushes:

```bash
# Split the subtree
git subtree split --prefix analyzer/userdocs -b docs-split

# Push the split branch
git push public-docs docs-split:main

# Clean up
git branch -D docs-split
```

## Setting Up GitHub Pages

1. Go to https://github.com/timothyfraser/cat/settings/pages
2. Under "Source", select:
   - Branch: `main` (or `gh-pages` if you used that)
   - Folder: `/ (root)`
3. Click Save
4. Your docs will be available at: `https://timothyfraser.github.io/cat/`

## Using a GitHub Actions Workflow (Automated)

Create `.github/workflows/sync-docs.yml` in the dashboard repo:

```yaml
name: Sync Docs to Public Repo

on:
  push:
    paths:
      - 'analyzer/userdocs/**'
    branches:
      - main  # or your main branch

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      
      - name: Push to public repo
        run: |
          git subtree push --prefix analyzer/userdocs https://github.com/timothyfraser/cat.git main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

Note: You may need to set up a Personal Access Token in secrets if the public repo is in a different organization.

## Troubleshooting

### "Updates were rejected"

If you get rejected updates:
- Make sure the public repo exists and is accessible
- Check that you have push permissions to the public repo
- Try pulling first: `git subtree pull --prefix analyzer/userdocs public-docs main --squash`

### "refs/heads/main:refs/heads/main" error

This usually means the public repo branch doesn't exist yet. Create it:
```bash
# Create an initial commit in the public repo first
cd /tmp
git clone https://github.com/timothyfraser/cat.git
cd cat
echo "# CAT ANALYZER Documentation" > README.md
git add README.md
git commit -m "Initial commit"
git push origin main
# Then try the subtree push again
```

### Faster Alternative: Git Submodule

If subtree is too slow, consider using a submodule instead:

1. Remove userdocs from main repo (backup first!)
2. Create userdocs as separate repo
3. Add as submodule:
   ```bash
   git submodule add https://github.com/timothyfraser/cat.git analyzer/userdocs
   ```
4. Work in the submodule directory, commit/push there
5. Commit submodule reference in main repo

## Quick Reference

**Push docs to public repo:**
```bash
git subtree push --prefix analyzer/userdocs public-docs main
```

**Check remote:**
```bash
git remote -v
```

**Remove remote (if needed):**
```bash
git remote remove public-docs
```




